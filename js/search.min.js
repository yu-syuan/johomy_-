/*
	Miya紅利館搜尋頁面JS
 */
$(function() {
  $(".search a").addClass("active");
  $(".search_button").click(function(){
    search();
  });
  var search_type = $('.search_keywords').attr("class");
  if (typeof(search_type) != "undefined"){
    var search_keywords = $('.search_keywords');
    search_keywords.tagsinput({
      maxTags: 5,
      maxChars: 17
    });
    search_keywords.on('beforeItemAdd', function(event) {
      var tag = event.item;
      //console.log(tag);
      $(".remind_color").html(""); //還原提示
      Rule = /^[^\!\'\"\=\>\<\-]+$/; //正規表示不允許!'"=><-
      if (!tag.match(Rule)){
        $(".remind_color").html("請勿使用特殊符號！");
        event.cancel = true;
      }
    });
    $('.search_keywords').on('itemAdded',function(event) {
      var tag = event.item;
      var itemTag = $(this).tagsinput('items').length;
      $(".remind_color").html(""); //還原提示
      if (itemTag > 5){
        $(".remind_color").html("關鍵字搜尋上限為5組喔！");
        event.cancel = true;
        $(this).tagsinput('remove',tag);
      }
    });
  }
});
// 20170811搜尋input正規表示法(只比對中文,逗號,數字、字母字元或底線)
function search() {
  $(".remind_color").html(""); //還原提示
  Rule = /^[^\!\'\"\=\>\<\-]+$/; //正規表示不允許!'"=><-
  var keywords = $(".search_keywords").val(); //宣告keywords為search_keywords的值
  if (keywords == ""){ //如果keywords為空白就執行
    $(".remind_color").html("尚未輸入關鍵字！");
    return false;
  } 
  if (!keywords.match(Rule)){ //比對keywords有無符合正規表示
    $(".remind_color").html("請勿使用特殊符號！");
    return false;
  } else {
    $("#product_search").submit();
    return true;
  }
}
// 搜尋結果頁排序功能
function filter() { 
	
}
